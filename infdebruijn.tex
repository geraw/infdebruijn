\documentclass{article}
%\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  

%\IEEEoverridecommandlockouts        % This command is only needed if you want to use the \thanks command
%\overrideIEEEmargins                        % See the \addtolength command later in the file to balance the column lengths


% Name clashes workaround
%\makeatletter
%\let\IEEEproof\proof
%\let\IEEEendproof\endproo f
%\let\proof\@undefined
%\let\endproof\@undefined
%\makeatother


\usepackage{epsfig} 
\usepackage{amsmath} 
\usepackage{amssymb} 
\usepackage{amsthm}  
\usepackage{hyperref}
\usepackage{tikz}
\usetikzlibrary{automata,arrows,decorations.pathmorphing,decorations.markings,positioning}
\usetikzlibrary{shapes}
%\usepackage{balance}




% Theorem like env.
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{claim}[theorem]{Claim}


\theoremstyle{definition}
\newtheorem{definition}{Definition}     
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{corrolary}[theorem]{Corrolary}


%------------------------------------------- preamble ---------------------------

\newcommand{\R}{{\mathbb{R}}}
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\C}{{\mathbb{C}}}
\newcommand{\Z}{{\mathbb{Z}}}

\newcommand{\REF}[2]{#1~\ref{#2}}

\newcommand{\T}[1]{\langle{#1}\rangle}
\newcommand{\rr}[2]{R^{#2}({#1})}
\newcommand{\rl}[2]{R^{-{#2}}({#1})}


\newcommand{\AorB}[2]{\bigl(#2\text{?}A(#1)\text{:}B(#1)\bigr)}


\pagestyle{plain}


\title{On Combinatorial Games and de Bruijn Sequences}

\author{Yotam Svoray and %Gera Weiss\\
	Department of Computer Science \\
	Ben Gurion University of the Negev\\
	Israel
}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
	
	%\section{Results}
	
	
\begin{definition}
For a parameter $n$, Let $L \subset \N^+$ be the set of non-periodic words over the alphabet $\Sigma=\N$ that are bigger in Arabic (right-to-left) lexicographical order than all of their rotations. Let $L_n$ be the set of all the words in $L$ whose length divides $n$.
\end{definition}

\begin{definition}\label{forward}
For a word $w$ whose length is smaller or equal than $n$, let  $f(w)$ be the transformation defined by successive applications of the following steps to $w$:
\begin{enumerate}
	\item[$f_1$:] Increase the first letter of the word by one. 
	\item[$f_2$:] Pad with zeros on the left to get a word of length $n$.
	\item[$f_3$:] Apply the substitution rules $u(vu)^+ \mapsto vu$ and then $w^+ \mapsto w$, with the longest possible $u$ and the shortest possible $w$.
\end{enumerate}
\end{definition}

\begin{definition}\label{backward}
For a a word $w$ whose length is smaller or equal than $n$, let  $b(w)$ be the transformation defined by successive applications of the following steps to $w$:
\begin{enumerate}
	\item[$b_1$:] Expand $w$ to $u w^m$ where $m=\lfloor n/ |w| \rfloor$ and $u$ is the prefix of length $n-m|w|$ of $w$.
	
	\item[$b_2$:] Remove leading zeros.
	\item[$b_3$:] Decrease the first letter by one.
\end{enumerate}
\end{definition}

\begin{observation}
	For any $w\in L_n$, $f(b(w))=b(f(w))=w$.
\end{observation}

\begin{proposition}
	If we start with $w(0)=0$ and generate a sequence of words by $w({i+1})=f(w(i))$, we get an enumeration of all the words in $L$ whose length divides $n$.
\end{proposition}
\begin{proof}
	This is a version of Duval's algorithm with a reversed order of the alphabet and a reversed order of letters in a word.
\end{proof}

\begin{definition}
	Let $f^*(w)$ be the first word in ${f(w),f(f(w)),\dots}$ whose length divides $n$ and let $b^*(w)$ be the first word in ${b(w),b(b(w)),\dots}$ whose length divides $n$. 
\end{definition}

%\begin{observation}
%	$b(w)$ is a suffix of $b^*(w)$ for every $w \in L_n$.
%\end{observation}
%\begin{proof}
%	If $|b(w)|$ is not $n$, then $b_1(b(w))$ gives a word of length $n$ that ends with $b(w)$. Since
%\end{proof}


\begin{definition}
	Let $w(0),w(1),...$ be the sequence generated by starting with $w(0)=0$ and then continuing ad infinitum by $w{(i+1)}=f^*(w(i))$ and let $w^*$ be the infinite word obtained by concatenating all these words.
\end{definition}


\begin{definition}
	For a word $w=\sigma_1\cdots\sigma_{n-1}\sigma_n$ let  $\rr{w}{}= \sigma_{n}\sigma_1\cdots\sigma_{n-1}$ be the rotation of $w$ to the right. Then, the nested invocation $\rr{w}{m}$ is the $m$ letter rotation to the right and its inverse $\rl{w}{m}$ is the $m$ letter rotation to the left.
\end{definition}

\begin{proposition}\label{simple-pos}
	For a $w \in L_n$ let $l$ be the number of trailing zeros (from the left) in $w$ and $\bar{w}=b_1(w)$. Then:
	\begin{enumerate}
		\item For all $0 \leq i \leq |w|-l-1$ the word $\rr{\bar{w}}{i}$ comes exactly $i$ letters before $w$ as a sub-word of $w^*$.
		
		\item For all $n-k \leq i \leq n-1$ the word $\rr{\bar{w}}{i}$ comes as sub-words of $w^*$ exactly $i-\operatorname{mod}(n-|f_3(u)|,n)$ letters before the first $u \in \T{0^{m-1} (\bar{w}_{m} + 1) \bar{w}_{m+1}\cdots \bar{w}_n}_{m=i}^{n}$ such that $u \in L_n$ and  $\max\{u_1,\dots,u_{n-1}\} \leq max(w)$.
	\end{enumerate}
\end{proposition}

\begin{proposition}
	The word $w^*$ contains all the words in $\N^n$ as subwords.
\end{proposition}
\begin{proof}
	Any word is a rotation of the expansion of some word in $L$.
\end{proof}


\begin{proposition}
	For any $k$ the prefix $w^*_1 \cdots w^*_{k^n}$ is an $n$-order de Bruijn sequences. Moreover, it is the reversed of the n-order prefer-max sequence on the alphabet $\T{0,\dots,k-1}$ (in this order). 
\end{proposition}
\begin{proof}
	Counting argument + arguing that if $|w| =n-1$ and $\sigma_1 < \sigma_2$ then $w\sigma_1$ comes before $w\sigma_2$ as subwords of $w^*$.
\end{proof}


\begin{proposition}
	For $w \in \N^n$, let $i$ be the minimal index such that $\rl{w}{i} \in L$ and let $\bar{w}=\rl{w}{i}$. Let $\bar{w}^+=\bar{w}_{1..i}(\bar{w}_{i+1}+1)\bar{w}_{(i+2)..n}$, i.e., the word obtained by increasing the $(i+1)th$ letter of $\bar{w}$ by one.  Then, the function
	$$next(w)=
	\begin{cases}
	f^*(f_3(w))_1 & \text{if } w \in L; \\
	w_1+1         & \text{if }\bar{w}_{1..i}= 0^i \wedge \bar{w}^+ \in L\wedge \max{(\bar{w}^+_{1..(n-1)})} \leq \max(w); \\
	0             & \text{if }\bar{w}_{1..i}= 0^i \wedge (\bar{w}^+ \notin L \vee \max{(\bar{w}^+_{1..(n-1)})} > \max(w)); \\
	w_1           & \text{otherwise.}
	\end{cases}$$
	represents the mapping of a word $w$ to the letter that follows the (only) occurrence of $w$ as a subword of $w^*$.
\end{proposition}

\begin{definition}
	Let $w(0)=0, w(1)=f^*(w(0)),\dots,w(i)=f^*(w{(i-1)}),\dots$ be our enumeration of all the words in $L_n$. Let $w^{(i)}$ be the concatenation of the first $i$ words in this enumeration and let $u(j)=w^{(i)}_{j-n+1}\cdots w^{(i)}_j$ be the ``window'' of length $n$ before the $j$th letter in $w^{(i)}$.
\end{definition}

\begin{proposition}
	For a word $w=w(i)$ be the $i$th word in the above enumeration. Let $l$ be the number of leading zeros in $w$ and let $\hat{w}=\rl{b_1(b^*(w)}{l}$. Then, inserting the cycle $\T{\rl{b_1(w)}{s}}_{s=0}^{n-1}$ after the word $\hat{w}_{1..(n-l)}0^l$ in $\T{u(j)}_{j=0}^{i-1}$ yields the sequence $\T{u(j)}_{j=0}^{i}$.
\end{proposition}		
	
		
\end{document}
	
	
