\documentclass{article}
%\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  

%\IEEEoverridecommandlockouts        % This command is only needed if you want to use the \thanks command
%\overrideIEEEmargins                        % See the \addtolength command later in the file to balance the column lengths


% Name clashes workaround
%\makeatletter
%\let\IEEEproof\proof
%\let\IEEEendproof\endproo f
%\let\proof\@undefined
%\let\endproof\@undefined
%\makeatother




\usepackage{epsfig} 
\usepackage{amsmath} 
\usepackage{amssymb} 
\usepackage{amsthm}  
\usepackage{hyperref}
\usepackage{tikz}
\usetikzlibrary{automata,arrows,decorations.pathmorphing,decorations.markings,positioning}
\usetikzlibrary{shapes}
%\usepackage{balance}




% Theorem like env.
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{lemma}[theorem]{Lemma}

\theoremstyle{definition}
\newtheorem{definition}{Definition}     
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{corrolary}[theorem]{Corrolary}


%------------------------------------------- preamble ---------------------------

\newcommand{\R}{{\mathbb{R}}}
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\C}{{\mathbb{C}}}
\newcommand{\Z}{{\mathbb{Z}}}

\newcommand{\REF}[2]{#1~\ref{#2}}

\newcommand{\T}[1]{\langle{#1}\rangle}
\newcommand{\rr}[2]{R^{#2}({#1})}
\newcommand{\rl}[2]{R^{-{#2}}({#1})}


\newcommand{\AorB}[2]{\bigl(#2\text{?}A(#1)\text{:}B(#1)\bigr)}


\pagestyle{plain}


\title{On Combinatorial Games and de Bruijn Sequences}

\author{Yotam Svoray and %Gera Weiss\\
Department of Computer Science \\
Ben Gurion University of the Negev\\
Israel
}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{definition}
	For a parameter $n$, Let $L \subset \N^+$ be the set of non-periodic words over the alphabet $\Sigma=\N$ that are bigger in Arabic (right-to-left) lexicographical order than all of their rotations. Let $L_n$ be the set of all the words in $L$ whose length divides $n$.
\end{definition}


\begin{definition}
	For a word $w=w_1\cdots w_{n-1}w_n$ let  $\rr{w}{}= w_{n}w_1\cdots w_{n-1}$ be the rotation of $w$ to the right. Then, the nested invocation $\rr{w}{m}$ is the $m$ letter rotation to the right and its inverse $\rl{w}{m}$ is the $m$ letter rotation to the left.
\end{definition}

	
\section{Forward and backwards transformations}


\begin{definition}\label{forward}
For a word $w$ whose length is smaller or equal than $n$, let  $f(w)$ be the transformation defined by successive applications of the following steps to $w$:
\begin{enumerate}
	\item[$f_1$:] Increase the first letter of the word by one. 
	\item[$f_2$:] Pad with zeros on the left to get a word of length $n$.
	\item[$f_3$:] Apply the substitution rules $u(vu)^+ \mapsto vu$ and then $w^+ \mapsto w$, with the longest possible $u$ and the shortest possible $w$.
\end{enumerate}
\end{definition}

\begin{definition}\label{backward}
For a a word $w$ whose length is smaller or equal than $n$, let  $b(w)$ be the transformation defined by successive applications of the following steps to $w$:
\begin{enumerate}
	\item[$b_1$:] Expand $w$ to $u w^m$ where $m=\lfloor n/ |w| \rfloor$ and $u$ is the suffix of length $n-m|w|$ of $w$.
	
	\item[$b_2$:] Remove leading zeros.
	\item[$b_3$:] Decrease the first letter by one.
\end{enumerate}
\end{definition}

\begin{observation}
	For any $w\in L_n$, $f(b(w))=b(f(w))=w$.
\end{observation}



\begin{proposition}
	If we start with $w(0)=0$ and generate a sequence of words by $w({i+1})=f(w(i))$, we get an enumeration of all the words in $L$ whose length is smaller or equal to $n$.
\end{proposition}
\begin{proof}
	This is a version of Duval's algorithm with a reversed order of the alphabet and a reversed order of letters in a word. 
\end{proof}

\begin{definition} \label{star-functions}
	Let $f^*(w)$ be the first word in ${f(w),f(f(w)),\dots}$ whose length divides $n$ and, similarly, let $b^*(w)$ be the first word in ${b(w),b(b(w)),\dots}$ whose length divides $n$. 
\end{definition}


\begin{definition}
	Let $w(0),w(1),...$ be the sequence generated by starting with $w(0)=0$ and then continuing ad infinitum by $w{(i+1)}=f^*(w(i))$ and let $w^\infty\in \N^\omega$ be the concatenation of all these words.
\end{definition}



\section{Where can I find $w$ as a sub-word of $w^\infty$?}

In this section we point at the position of an arbitrary word $w$ as a sub-word of  $w^\infty$ relative to the position of the a corresponding word in $L_n$. This is given in Proposition~\ref{simple-pos} and in Proposition~\ref{advanced-pos}. Towards the proofs of these propositions, we first establish some technical results about the functions $b$ and $b^*$ specified, respectively, in Definition~\ref{backward} and in Definition~\ref{star-functions}.


\begin{proposition}
	\label{w-at-the-tail}
	If $w \in L_n$ and $|w| \neq n$ then  $b(w)=uw$ for some non-empty word $u$. 
\end{proposition}
\begin{proof}
	The first transformation $b_1$ extends $w$ to the left producing the word $b_1(w)=uw^m$ where $u$ is a tail of $w$. Since $w \in L_n$ and because it contains a letter $\sigma$ that is not zero, we have, by maximality of $w$ among its rotations in right-to-left lexicographical order,  that its last letter is not zero. The last letter of $u$ is the last letter of $w$ so it is also not zero. This gives us that the next transformation $b_2$, that deletes trailing zeros, leaves at least the last copy of $w$ and the last letter of the before-last (full or partial) copy at the tail of $b_1(w)$. Thus, $b_2(b_1(w))=uw$ where $u$ is a non-empty word whose first letter is not zero. Then, the last transformation $b_3$ only decreases the first letter of $u$ by  one which gives us that $b(w)=b_3(b_2(b_1(w)))=vw$ for some non-empty word $v$.	
\end{proof}
	
\begin{proposition}
	\label{hat-w-at-the-tail}
	For any $w=0^l \sigma \hat{w}\in L_n$ where $\sigma$ is a non-zero letter there is a non-empty word $u$ such that $b(w)=u\hat{w}$.
\end{proposition}
\begin{proof}
	If $|w|\neq n$ the proof follows by Proposition~\ref{w-at-the-tail}. If $|w|=n$ then $b_1(w)=w$, $b_2(b_1(w))=\sigma\hat{w}$, and $b_3(b_2(b_1(w)))=(\sigma-1)\hat{w}$ and the claim follows as well.
\end{proof}
	
	
\begin{proposition}\label{simple-pos}
	Let $w$ be an arbitrary word in $\N^n$ and let and let $\bar{w}=f_3(w)$. Let $l$ be the (possibly zero) number of trailing zeros (from the left) in $w$.  Then, for all $0 \leq i \leq |w|-l-1$, the word $\rr{\bar{w}}{i}$ comes $i+n-|w|$ letters before $w$ as a sub-word of $w^\infty$.
\end{proposition}



\begin{proposition}\label{simple-pos}
	For a given $w \in L_n$, let $l$ be the number of trailing zeros (from the left) in $w$ and let $\bar{w}=b_1(w)$. Then, for all $0 \leq i \leq |w|-l-1$, the word $\rr{\bar{w}}{i}$ comes $i+n-|w|$ letters before $w$ as a sub-word of $w^\infty$.
\end{proposition}
\begin{proof}
	By Proposition~\ref{tail-is-preseved*} the words that come before $w$ ends with the last $|w|-l$ letters of $w$. In particular, the $n$ letter word that starts $i+n-|w|$ before $w$ is $\rr{\bar{w}}{i}$.
\end{proof}

\begin{proposition}\label{advanced-pos}
	For a given $w \in L_n$, let $l$ be the number of trailing zeros (from the left) in $w$ and let $\bar{w}=b_1(w)$. Then, for all $|w|-l \leq i \leq n-1$ the word $\rr{\bar{w}}{i}$ comes $i-(n-|f_3(u)| \pmod n)$ letters before the first $u \in \T{0^{m-1} (\bar{w}_{m} + 1) \bar{w}_{m+1}\cdots \bar{w}_n}_{m=i+1}^{n}$ that is in $L_n$. 
\end{proposition}


\begin{proposition}
	The word $w^\infty$ contains all the words in $\N^n$ as subwords.
\end{proposition}
\begin{proof}
	Any word of length $n$ is a rotation of the expansion of a word in $L_n$.
\end{proof}


\begin{proposition}
	For any $k$ the prefix $w^\infty_1 \cdots w^\infty_{k^n}$ is an $n$-order de Bruijn sequences. Moreover, it is the reversed of the n-order prefer-max sequence on the alphabet $\T{0,\dots,k-1}$ (in this order). 
\end{proposition}
\begin{proof}
	Counting argument + arguing that if $|w| =n-1$ and $\sigma_1 < \sigma_2$ then $w\sigma_1$ comes before $w\sigma_2$ as subwords of $w^\infty$.
\end{proof}


\begin{proposition}
For $w \in \N^n$, let $i$ be the minimal index such that $\rl{w}{i} \in L$ and let $\bar{w}=\rl{w}{i}$. Let $\bar{w}^+=\bar{w}_{1..i}(\bar{w}_{i+1}+1)\bar{w}_{(i+2)..n}$, i.e., the word obtained by increasing the $(i+1)th$ letter of $\bar{w}$ by one.  Then, the function
$$next(w)=
\begin{cases}
f^*(f_3(w))_1 & \text{if } w \in L; \\
w_1+1         & \text{if }\bar{w}_{1..i}= 0^i \wedge \bar{w}^+ \in L\wedge \max{(\bar{w}^+_{1..(n-1)})} \leq \max(w); \\
0             & \text{if }\bar{w}_{1..i}= 0^i \wedge (\bar{w}^+ \notin L \vee \max{(\bar{w}^+_{1..(n-1)})} > \max(w)); \\
w_1           & \text{otherwise.}
\end{cases}$$
represents the mapping of a word $w$ to the letter that follows the (one and only) occurrence of $w$ as a subword of $w^\infty$.
\end{proposition}

\begin{definition}
	Let $w(0)=0, w(1)=f^*(w(0)),\dots,w(i)=f^*(w{(i-1)}),\dots$ be our enumeration of all the words in $L_n$. Let $w^{(i)}=w(0)\cdots w(i)$ be the concatenation of the first $i$ words in this enumeration and let $u(j)=w^{(i)}_{j-n+1}\cdots w^{(i)}_j$ be the ``window'' of length $n$ before the $j$th letter in $w^{(i)}$.
\end{definition}

\begin{proposition}
For a word $w=w(i)$ be the $i$th word in the above enumeration. Let $l$ be the number of leading zeros in $w$ and let $\hat{w}=\rl{b_1(b^*(w))}{l}$. Then, inserting the cycle $\T{\rl{b_1(w)}{s}}_{s=0}^{n-1}$ after the word $\hat{w}_{1..(n-l)}0^l$ in $\T{u(j)}_{j=0}^{i-1}$ yields the sequence $\T{u(j)}_{j=0}^{i}$.
\end{proposition}	





\section{Where can I find $w$ as a sub-word of $w^\infty$? (second try...)}
		
\begin{definition}
For a word $w$, $max(w)$ is the maximal digit in $w$.
\end{definition}

\begin{definition}
A word $u\in \mathbb{N}$ corresponds to $w\in L_n$ if $u$ is a rotation of $w^{\frac{n}{|w|}}$. Note that each $u\in \mathbb{N}$ corresponds to exactly one word $w\in L_n$.
\end{definition}

\begin{proposition}
\label{newforward}
If $w\in L_n$ and $|w|<n$, then $f^*(w)=f(w)=0^{|w|}u$ for some word $u$.
\end{proposition}
\begin{proof}
Write $\frac{n}{|w|}=c>1$. Thus, $f_1(w)=x$, $f_2(x)=0^{(c-1)|w|}x$ and $f_3(0^{(c-1)|w|}x)=0^{c-1|w|}x=f(w)$. Since $|x|=|w|$, $|f(w)|=n$ and hence, $f^*(w)=f(w)$. In addition, $(c-1)|w|\geq|w|$. 
\end{proof}

\begin{proposition}
\label{1-back}
If $|w|<n$ and $w=w'k$ where $0<k=max(w)$, then $b(w)=uw$ and $max(u)\leq max(w)$. 
\end{proposition}
\begin{proof}
Write $w=w'k$. Thus, $b_1(w)=xk(w'k)^r$, $r>0$. $b_2(xk(w'k)^r)=y(w'k)^r$. $b_3(y(w'k)^r)=uw'k=uw$. It is easy to see that $\max{u}\leq k$.
\end{proof}

\begin{proposition}
\label{*-back}
If $w\in L_n$, $|w|^m=n$, $m>1$ and $w= 0^l\sigma\hat{w}$ such that $\sigma\neq 0$, then $b^*(w)=u\hat{w}w^{m-1}$ for some $u$. Note that in particular, $|b^*(w)|=n$.
\end{proposition}

\begin{proof}
Since $w\in L_n$ and $w\neq 0$, $b_1(w)=w^m=(0^l\sigma w'k)^m$. 
$$b(w)=b_3(b_2((0^l\sigma\hat{w})^m))=b_3((xk)(w'k)^{m-1})=y(w'k)^{m-1}=y\sigma-1\hat{w}w^{m-1}.$$
Now, if $|y\sigma-1\hat{w}w^{m-1}=n$, then $y\sigma-1\hat{w}w^{m-1}=b^*(w)$ and we are done. Otherwise, 
$$b^*(w^{m-1})=b^r(y\sigma-1\hat{w}w^{m-1}).$$
Hence, the words $b(y\sigma-a\hat{w}w^{m-1}),b^2(y\sigma-\hat{w}w^{m-1}),\dots,b^{r-1}(y\sigma-1\hat{w}w^{m-1})$ are of length less than $n$. We apply Proposition \ref{1-back} on these words and we get that for each $l\leq r-1$,  $b^l(y\sigma-1\hat{w}w^{m-1})=u_1u_2\dots u_ly\sigma-1\hat{w}w^{m-1}$.
\end{proof}


\begin{proposition}
Assume that $u\in \mathbb{N}^n$ corresponds to $w\in L_n$ such that $|w|<n$. then, $u$ is a subword of $w^\infty$. 
\end{proposition}

\begin{proof}
If $u=0^n$, then $u$ is a prefix of $w^\infty$ and we are done. Otherwise, $w=0^l\sigma\hat{w}$ where $\sigma\neq 0$ and take $m$ such that $|w|^m=n$. Note that $m>1$. By Propositions \ref{newforward} and  \ref{*-back}, $b^*(w)wf^*(w)=x\hat{w}w^{m-1}w0^|w|y$ is a subword of $w^\infty$. Hence, 
$$\hat{w}(0^l\sigma\hat{w})^m0^l \text{ is a subword of } w^\infty.$$
$u$ is a rotation of $w^m$ thus $u$ is a subword of $\hat{w}(0^l\sigma\hat{w})^m0^l$ which implies that $u$ is a subword of $w^\infty$.
\end{proof}


\begin{proposition}
Assume that $u=yx\in\mathbb{N}^n$ corresponds to $w=xy\in L_n$ where $|w|=n$. If $x\neq 0^r$, then $u$ is a subword of $w^\infty$. 
\end{proposition}

\begin{proof}
We show that $u=yx$ is a subword of $b^*(w)w$. Write $x=0^l\sigma z$ where $\sigma\neq 0$. Thus, since $|w|=n$, $b(w)=\sigma-1zy$. If $b(w)=b^*(w)$, then 
$$b^*(w)w=v(\sigma-1)zyx$$
and we get that $u$ is a subowrd of $b^*(w)b(w)$. Otherwise, $|(\sigma-1)zy|$ does not divides $n$, and in particular, $|\sigma-1zy|<n$. By applying Proposition \ref{1-back} several times, we get that $b*(w)=v(\sigma-1)zy$ for some $v$, and $u=yx$ is a subword of $b^*(w)w=v(\sigma-1)zyxy$.
\end{proof}

\begin{lemma}
\label{z1}
Assume that $w=0^lv\in L_n$ and $|w|=n$. Write $w=0^lz_1\sigma z_2$ where $\sigma$ is the first digit in such that $0^{l+|z_1|}(\sigma+1)z_2$ is lexicographically maximal among its rotations. Take $k\in \N$ such that $|z_1|\leq|(\sigma z_2)^k|$. Then, $z_1$ is a suffix of $(\sigma z_2)^k$.
\end{lemma}

\begin{proof}
Assume for a contradiction that $z_1$ is not a suffix of $(\sigma z_1)^k$, and hence there are $\tau\neq \tau'$ in $\N$ and a word $y$, such that $\tau'y$ is a suffix of $\sigma z_2$, and 
$$z_1=x\tau y(\sigma z_2)^r, \ (\sigma z_2)^k= x'\tau' y(\sigma z_2)^r.$$
Clearly, $\tau<\tau'$ since otherwise, $\tau'<\tau$, and we get that 
$w=0^lz_1\sigma z_2=0^lx\tau y (\sigma z_2)^{r+1}$. However, if we assume that $\tau'<\tau$, $w'=(\sigma z_2)^r0^lx\tau y$ is lexicographically larger than $w$, in contradiction to $w\in L_n$.
\end{proof}

\begin{corrolary}
\label{z1-suffix}
Assume that $w=0^lv\in L_n$ and $|w|=n$. Write $w=0^lz_1\sigma z_2$ where $\sigma$ is the first digit in such that $0^{l+|z_1|}(\sigma+1)z_2$ is lexicographically maximal among its rotations. Then, there are words $x,y$ such that $z_2=xy$, $w=0^ly(\sigma xy)^{r+1}$ and $z_1=y(\sigma xy)^r$.
\end{corrolary}
\begin{proof}
 This is a consequence of the previous Lemma and the fact that $|0^lz_1|=|x(\sigma z_2)|^m$.
\end{proof}

\begin{lemma}
If $uv=vu$ and $u,v\neq\varepsilon$, then there is some word $w$, such that $u,v\in\{w\}^*$.
\end{lemma}

\begin{proof}
By induction on $|u|+|v|$. If $|u|=|v|$, $u=v$ and we are done. Otherwise, assume w.l.o.g. that $|u|>|v|$ and write $u=vx$ (since $uv=vu$). Then, $ux=vxv=vvx=vu$. We see that $xv=vx$. By the induction hypothesis, $x=w^k$ and $v=w^l$. Hence, $u=w^{l+k}$ as required.
\end{proof}

\begin{lemma}
Let $w=0^ly(x0^ly)^{r+1}$ be an $n$-length word such that $y\notin \{0\}^*$. Then, $w$ is not a key-word. 
\end{lemma}

\begin{proof}
Assume for a contradiction that $w$ is a key-word of length $n$, and take a maximal $t\in \N$ such that $x0^ly=x'(0^ly)^{t+1}$. First, we note that $x'\neq \varepsilon$. Indeed, if $x'=\varepsilon$, then $w=(0^ly)(0^ly)^{t(r+1)}$, a periodic word, and $w$ then is not an key-word.

Now we claim that $|x'|<|0^ly|$. For verifying this claim, assume that $|x|\geq |0^ly|$ and write $x=x'_1x'_2$, where $|x'_2|=|0^ly|$. By maximality of $t$, $x'_2\neq 0^ly$, and since $w\in L_n$, $x'_2<_{lex} ^ly$. Therefore, $(x0^ly)^rx_1'x_2'(0^ly)^{t+1}0^ly$, is a rotation of $w$ which is lexicographically larger then $w$, in contradiction to $w\in L_n$.

To summary our conclusions, we have $w=0^ly(x0^ly)^rx'(0^ly)^{t+1}\in L_n$, and $|x'|<|0^ly|$. Write $0^ly=z_1z_2$ where $|x'|=|z_2|$. Therefore, $w=z_1z_2(z_2(z_1z_2)^{t+1})\dots(z_2(z_1z_2)^{t+1})$. We look at the rotation of $w$, $w'=(z_2(z_1z_2)^{t+1})\dots(z_2(z_1z_2)^{t+2})$. Since $w\in L_n$, $w$ is lexicographically larger than $w'$ and in particular,
$(z_1z_2z_2(z_1z_2)^{t+1})\geq_{lex}(z_2(z_1z_2)^{t+2})$ which implies that
$$z_1z_2z_2\geq_{lex}z_2z_1z_2.$$
In addition, $z_2z_1z_2$ is a suffix of $w$ while $z_1z_2z_2$ is a subword of $w$. Hence, as $w\in L_n$ we have,
$$z_2z_1z_2\geq z_1z_2z_2.$$
As a result, $z_2z_1z_2=z_1z_2z_2$ thus $z_2z_1=z_1z_2$. By Lemma \ref{}, $z_1=z^{l_1}$ and $z_2=z^{l_2}$ for some non empty word $z$. Therefore, $w=z^m$ for some $z>0$ in contradiction to $w\in L_n$. 


\end{proof}

\begin{proposition}
Assume that $v0^l\in\mathbb{N}^n$ corresponds to $w=0^lv\in L_n$ where $|w|=n$ and $l>0$. Then, $v0^l$ is a subword of $w^\infty$. 
\end{proposition}

\begin{proof}
Write $w=0^lz_1\sigma z_2$ where $\sigma\in \N$ is the first digit in $w$ so that  $0^{l+|z_1|}(\sigma+1)z_2$ is lexicographically maximal among its rotations. Note that such a digit exists since the last digit in $w$ satisfies this requirement. Hence, $v=z_1\sigma z_2$.

By Corollary \ref{z1-suffix}, $z_2=xy$ and $z_1=y(\sigma xy)^r$. Now, since $|0^{l+|z_1|}(\sigma+1)z_2|=n$ and $0^{l+|z_1|}(\sigma+1)z_2$ is lexicographically maximal among its rotations, $0^{l+|z_1|}(\sigma+1)z_2=(w')^{k+1}$ where $w'\in L_n$. Note that $0^{l+|z_1|}$ is a prefix of $w'$. We consider three possibilities

\begin{description}

\item{Case 1.}  $\sigma z_2\in L_n$. We show that in this case, $v0^l$ is a subword of $b^*(b^*(w'))(b^*(w'))w'$, which is a subword of $w^\infty$.

$b_1(w')=w'^{k+1}=0^{l+|z_1|}(\sigma+1)z_2$. Hence, $b(w')=b_3(b_2(0^{l+|z_1|}(\sigma+1)z_1))=\sigma z_2$. Since $\sigma z_2\in L_n$, $b(w')=b^*(w')=\sigma z_2$ and in particular, $|(\sigma z_2)^{m+1}|=n$ for some $m\in \N$. Observe that $|z_1|\leq |\sigma z_2|^m$ and use Lemma \ref{z1} to conclude that $z_1$ is a suffix of $(\sigma z_2)^m$.  

By invoking Proposition \ref{1-back} several times, $b^*(\sigma z_2)= u(\sigma z_2)^m$ for some $u$. Hence, $v0^l=z_1\sigma z_2 0^l$ is a subword of 
$$b^*(b^*(w'))b^*(w')b(w')=u(\sigma z_2)^{m+1}0^{l+|z_1|}x'.$$


\end{description}

Before we deal with the other cases, we note that $b_1(\sigma z_2)=b_1(\sigma xy)=x'y(\sigma xy)^{r+1}$ for some $x'$ that satisfies $|x'|=l>0$.

\begin{description}
\item{Case 2.} $\sigma z_2\notin L_n$  and $x'\neq 0^l$. We show that in this case, $v0^l$ is a subword of $b^*(w')w'$, which is a subword of $w^\infty$.

Recall that $b(w')=\sigma z_2$ which is, by assumption, not a key-word. Since $x'\neq 0^l$, several invocations of Proposition \ref{1-back} imply that $b^*(\sigma z_2)=x''y(\sigma z_2)^{r+1}$. Since $v=z_1\sigma z_2=y(\sigma z_2)^{r+1}$, we get that $v0^l$ is a subword of 
$$b^*(w')w'=x''y(\sigma z_2)^{r+1}0^{l+|z_1}u.$$


\item{Case 3.} $\sigma z_2\notin L_n$  and $x'=0^l$. In this case, $b_1(\sigma z_2)$ = $0^ly(\sigma xy)^{r+1}$. Note that $w=0^ly(x''0^ly)^{r+1}$ and use Lemma \ref{} to achieve a contradiction.

\end{description}

 
\end{proof}

\begin{theorem}
$w^\infty$ is an infinite De-Bruijn sequence.
\end{theorem}

\begin{proof}
According to Propositions \ref{}, every $n$-sequence is a subword of $w^\infty$. By the ``onion theorem" and by the pigeonhole principle, every $n$-sequence appears only once at $w^\infty$.
\end{proof}



\end{document}

